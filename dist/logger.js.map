{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 480e45c4f22ee0adf9ce","webpack:///./src/util/typor.js","webpack:///./src/index.js","webpack:///./src/core/logger.js","webpack:///./src/core/enum.js","webpack:///./src/core/config.js","webpack:///./src/appenders/index.js","webpack:///./src/appenders/console.js","webpack:///./src/appenders/localstorage.js","webpack:///./src/core/formatter.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","TYPOR","str","v","obj","_typeof","arr","Array","isArray","func","_logger","_typor","_enum","_config","_formatter","lid","Logger","options","arguments","length","undefined","_classCallCheck","_typor2","default","init","T","instance","isNew","config","generateConfig","setLevel","level","setPrefix","prefix","setSeparator","separator","setDateFormatter","dateFormatter","setAppender","appenders","key","value","setConfig","formatter","map","appender","generateAppender","filter","_invoke","args","splittedArgs","_this","slice","method","shift","messages","forEach","_append","appenderLevel","LEVELS","handler","formatAppenderArgs","ALL","DEBUG","LOG","INFO","WARN","ERROR","OFF","presets","toLocaleString","keys","_appenders2","type","console","localstorage","apply","date","%c","%m","%p","%t","replace","formatPrefix","Date","concat"],"mappings":"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","file":"logger.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Logger\"] = factory();\n\telse\n\t\troot[\"Logger\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 480e45c4f22ee0adf9ce","const TYPOR = {\n  str (v) {\n    return typeof v === 'string'\n  },\n\n  obj (v) {\n    return v !== null && typeof v === 'object'\n  },\n\n  arr (v) {\n    return Array.isArray(v)\n  },\n\n  func (v) {\n    return typeof v === 'function'\n  }\n}\n\nexport default TYPOR\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/typor.js","import Logger from './core/logger'\n\nexport default Logger\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import TYPOR from '../util/typor'\nimport { LEVELS } from './enum'\nimport { generateConfig, generateAppender } from './config'\nimport { formatAppenderArgs } from './formatter'\n\nlet lid = 0\n\nclass Logger {\n  lid\n  name\n  config\n\n  static instance = null\n\n  static get (options = {}) {\n    const T = this\n\n    if (!T.instance || options.isNew) {\n      T.instance = new T(options)\n    }\n\n    return T.instance\n  }\n\n  constructor (options = {}) {\n    options = TYPOR.str(options) ? {\n      name: options\n    } : options\n\n    this.lid = lid++\n    this.name = options.name || `logger#${this.lid}`\n    this.init(options)\n  }\n\n  init (options) {\n    const config = generateConfig(options.config || {})\n\n    this.setLevel(config.level)\n    this.setPrefix(config.prefix)\n    this.setSeparator(config.separator)\n    this.setDateFormatter(config.dateFormatter)\n    this.setAppender(config.appenders)\n  }\n\n  setConfig (key, value) {\n    this.config = this.config || {}\n    this.config[key] = value\n  }\n\n  setLevel (level) {\n    this.setConfig('level', level)\n  }\n\n  setPrefix (prefix) {\n    this.setConfig('prefix', prefix)\n  }\n\n  setSeparator (separator) {\n    this.setConfig('separator', separator)\n  }\n\n  setDateFormatter (formatter) {\n    this.setConfig('dateFormatter', formatter)\n  }\n\n  setAppender (appenders) {\n    appenders = TYPOR.arr(appenders) ? appenders : [appenders]\n    appenders = appenders.map((appender) => {\n      return generateAppender(appender)\n    }).filter(appender => !!appender)\n\n    this.setConfig('appenders', appenders)\n  }\n\n  log () {\n    this._invoke('LOG', arguments)\n  }\n\n  debug () {\n    this._invoke('DEBUG', arguments)\n  }\n\n  info () {\n    this._invoke('INFO', arguments)\n  }\n\n  warn () {\n    this._invoke('WARN', arguments)\n  }\n\n  error () {\n    this._invoke('ERROR', arguments)\n  }\n\n  _invoke (level, args) {\n    let splittedArgs\n\n    args = Array.prototype.slice.call(args)\n    splittedArgs = {\n      method: args.length > 1 ? args.shift() : null,\n      messages: args\n    }\n\n    this.config.appenders.forEach((appender) => {\n      this._append(appender, level, splittedArgs.method, splittedArgs.messages)\n    })\n  }\n\n  _append (appender, level, method, messages) {\n    const name = this.name\n    const config = this.config\n    const appenderLevel = appender.level || config.level\n\n    if (LEVELS[level] >= LEVELS[appenderLevel]) {\n      if (TYPOR.func(appender.handler)) {\n        appender.handler(level, formatAppenderArgs({ name, config, appender, level, method, messages }))\n      }\n    }\n  }\n}\n\nexport default Logger\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/logger.js","export const LEVELS = {\n  'ALL': 0,\n  'DEBUG': 1,\n  'LOG': 2,\n  'INFO': 3,\n  'WARN': 4,\n  'ERROR': 5,\n  'OFF': 9\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/enum.js","import TYPOR from '../util/typor'\nimport BuiltInAppenders from '../appenders'\n\nexport function generateConfig (config) {\n  let presets = {\n    level: 'LOG',\n    prefix: '[%t] [%p] [%c->%m]',\n    separator: '-',\n    dateFormatter (d) {\n      return d.toLocaleString()\n    },\n    appenders: ['console', 'localStorage']\n  }\n\n  Object.keys(config).forEach((key) => {\n    const value = config[key]\n    if (value != null) {\n      presets[key] = value\n    }\n  })\n\n  return presets\n}\n\nexport function generateAppender (appender) {\n  if (TYPOR.str(appender)) {\n    return {\n      handler: BuiltInAppenders[appender]\n    }\n  } else if (TYPOR.func(appender)) {\n    return {\n      handler: appender\n    }\n  } else if (TYPOR.obj(appender)) {\n    if (TYPOR.str(appender.type)) {\n      appender.handler = BuiltInAppenders[appender.type]\n    }\n\n    return appender\n  } else {\n    return null\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","import console from './console'\nimport localstorage from './localstorage'\n\nexport default {\n  console,\n  localstorage\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/appenders/index.js","export default function (level, args) {\n  const map = {\n    'LOG': 'log',\n    'DEBUG': 'debug',\n    'INFO': 'info',\n    'WARN': 'warn',\n    'ERROR': 'error'\n  }\n  const method = console[map[level]]\n\n  return method.apply(console, args)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/appenders/console.js","export default function (level, args) {\n  // @todo: append log to localStorage\n  return level\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/appenders/localstorage.js","const formatDate = function (formatter) {\n  const date = new Date()\n  return formatter.call(date, date)\n}\n\nconst formatPrefix = function (prefix, options) {\n  const map = {\n    '%c': options.name,\n    '%m': options.method,\n    '%p': options.level,\n    '%t': options.date\n  }\n\n  return prefix.replace(/(%c|%m|%p|%t)/g, (c) => {\n    return map[c] || '?'\n  })\n}\n\nconst formatAppenderArgs = function (options) {\n  const { name, config, appender, level, method, messages } = options\n  const prefix = appender.prefix || config.prefix\n  const separator = appender.separator || config.separator\n  const dateFormatter = appender.dateFormatter || config.dateFormatter\n  const formattedDate = formatDate(dateFormatter)\n  const formattedPrefix = formatPrefix(prefix, { name, method, level, date: formattedDate })\n\n  return [formattedPrefix, separator].concat(messages)\n}\n\nexport {\n  formatAppenderArgs\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/formatter.js"],"sourceRoot":""}
{"version":3,"sources":["webpack:///webpack/bootstrap 015bcc84ca6d1698efbd","webpack:///./src/util/typor.js","webpack:///./src/index.js","webpack:///./src/core/logger.js","webpack:///./src/core/enum.js","webpack:///./src/core/config.js","webpack:///./src/appenders/index.js","webpack:///./src/appenders/console.js","webpack:///./src/appenders/localstorage.js","webpack:///./src/core/formatter.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","TYPOR","str","v","obj","_typeof","arr","Array","isArray","func","_logger","_typor","_enum","_config","_formatter","lid","Logger","options","arguments","length","undefined","_classCallCheck","this","init","T","instance","isNew","config","generateConfig","setLevel","level","setPrefix","prefix","setSeparator","separator","setDateFormatter","dateFormatter","setAppender","appenders","key","value","setConfig","formatter","_typor2","default","map","appender","generateAppender","filter","_invoke","args","splittedArgs","_this","slice","method","shift","messages","forEach","_append","appenderLevel","LEVELS","handler","formatAppenderArgs","ALL","DEBUG","LOG","INFO","WARN","ERROR","OFF","presets","toLocaleString","keys","_appenders2","type","console","localstorage","apply","date","%c","%m","%p","%t","replace","formatPrefix","Date","concat"],"mappings":"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","file":"logger.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 015bcc84ca6d1698efbd","const TYPOR = {\n  str (v) {\n    return typeof v === 'string'\n  },\n\n  obj (v) {\n    return v !== null && typeof v === 'object'\n  },\n\n  arr (v) {\n    return Array.isArray(v)\n  },\n\n  func (v) {\n    return typeof v === 'function'\n  }\n}\n\nexport default TYPOR\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/typor.js","import Logger from './core/logger'\n\nexport default Logger\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import TYPOR from '../util/typor'\nimport { LEVELS } from './enum'\nimport { generateConfig, generateAppender } from './config'\nimport { formatAppenderArgs } from './formatter'\n\nlet lid = 0\n\nclass Logger {\n  lid\n  name\n  config\n\n  static instance = null\n\n  static get (options = {}) {\n    const T = this\n\n    if (!T.instance || options.isNew) {\n      T.instance = new T(options)\n    }\n\n    return T.instance\n  }\n\n  constructor (options = {}) {\n    this.lid = lid++\n    this.name = options.name || `logger#${this.lid}`\n    this.init(options)\n  }\n\n  init (options) {\n    const config = generateConfig(options.config || {})\n\n    this.setLevel(config.level)\n    this.setPrefix(config.prefix)\n    this.setSeparator(config.separator)\n    this.setDateFormatter(config.dateFormatter)\n    this.setAppender(config.appenders)\n  }\n\n  setConfig (key, value) {\n    this.config = this.config || {}\n    this.config[key] = value\n  }\n\n  setLevel (level) {\n    this.setConfig('level', level)\n  }\n\n  setPrefix (prefix) {\n    this.setConfig('prefix', prefix)\n  }\n\n  setSeparator (separator) {\n    this.setConfig('separator', separator)\n  }\n\n  setDateFormatter (formatter) {\n    this.setConfig('dateFormatter', formatter)\n  }\n\n  setAppender (appenders) {\n    appenders = TYPOR.arr(appenders) ? appenders : [appenders]\n    appenders = appenders.map((appender) => {\n      return generateAppender(appender)\n    }).filter(appender => !!appender)\n\n    this.setConfig('appenders', appenders)\n  }\n\n  log () {\n    this._invoke('LOG', arguments)\n  }\n\n  debug () {\n    this._invoke('DEBUG', arguments)\n  }\n\n  info () {\n    this._invoke('INFO', arguments)\n  }\n\n  warn () {\n    this._invoke('WARN', arguments)\n  }\n\n  error () {\n    this._invoke('ERROR', arguments)\n  }\n\n  _invoke (level, args) {\n    let splittedArgs\n\n    args = Array.prototype.slice.call(args)\n    splittedArgs = {\n      method: args.length > 1 ? args.shift() : null,\n      messages: args\n    }\n\n    this.config.appenders.forEach((appender) => {\n      this._append(appender, level, splittedArgs.method, splittedArgs.messages)\n    })\n  }\n\n  _append (appender, level, method, messages) {\n    const name = this.name\n    const config = this.config\n    const appenderLevel = appender.level || config.level\n\n    if (LEVELS[level] >= LEVELS[appenderLevel]) {\n      if (TYPOR.func(appender.handler)) {\n        appender.handler(level, formatAppenderArgs({ name, config, appender, level, method, messages }))\n      }\n    }\n  }\n}\n\nexport default Logger\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/logger.js","export const LEVELS = {\n  'ALL': 0,\n  'DEBUG': 1,\n  'LOG': 2,\n  'INFO': 3,\n  'WARN': 4,\n  'ERROR': 5,\n  'OFF': 9\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/enum.js","import TYPOR from '../util/typor'\nimport BuiltInAppenders from '../appenders'\n\nexport function generateConfig (config) {\n  let presets = {\n    level: 'ALL',\n    prefix: '[%t] [%p] [%c->%m]',\n    separator: '-',\n    dateFormatter (d) {\n      return d.toLocaleString()\n    },\n    appenders: ['console', 'localStorage']\n  }\n\n  Object.keys(config).forEach((key) => {\n    const value = config[key]\n    if (value != null) {\n      presets[key] = value\n    }\n  })\n\n  return presets\n}\n\nexport function generateAppender (appender) {\n  if (TYPOR.str(appender)) {\n    return {\n      handler: BuiltInAppenders[appender]\n    }\n  } else if (TYPOR.func(appender)) {\n    return {\n      handler: appender\n    }\n  } else if (TYPOR.obj(appender)) {\n    if (TYPOR.str(appender.type)) {\n      appender.handler = BuiltInAppenders[appender.type]\n    }\n\n    return appender\n  } else {\n    return null\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config.js","import console from './console'\nimport localstorage from './localstorage'\n\nexport default {\n  console,\n  localstorage\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/appenders/index.js","export default function (level, args) {\n  const map = {\n    'LOG': 'log',\n    'DEBUG': 'debug',\n    'INFO': 'info',\n    'WARN': 'warn',\n    'ERROR': 'error'\n  }\n  const method = console[map[level]]\n\n  return method.apply(console, args)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/appenders/console.js","export default function (level, args) {\n  // @todo: append log to localStorage\n  return level\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/appenders/localstorage.js","const formatDate = function (formatter) {\n  const date = new Date()\n  return formatter.call(date, date)\n}\n\nconst formatPrefix = function (prefix, options) {\n  const map = {\n    '%c': options.name,\n    '%m': options.method,\n    '%p': options.level,\n    '%t': options.date\n  }\n\n  return prefix.replace(/(%c|%m|%p|%t)/g, (c) => {\n    return map[c] || '?'\n  })\n}\n\nconst formatAppenderArgs = function (options) {\n  const { name, config, appender, level, method, messages } = options\n  const prefix = appender.prefix || config.prefix\n  const separator = appender.separator || config.separator\n  const dateFormatter = appender.dateFormatter || config.dateFormatter\n  const formattedDate = formatDate(dateFormatter)\n  const formattedPrefix = formatPrefix(prefix, { name, method, level, date: formattedDate })\n\n  return [formattedPrefix, separator].concat(messages)\n}\n\nexport {\n  formatAppenderArgs\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/formatter.js"],"sourceRoot":""}